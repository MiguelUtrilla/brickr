<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mosaics with brickr • brickr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Mosaics with brickr">
<meta property="og:description" content="brickr">
<meta property="og:image" content="http://brickr.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brickr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ryantimpe/brickr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="mosaics_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Mosaics with brickr</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ryantimpe/brickr/blob/master/vignettes/mosaics.Rmd"><code>vignettes/mosaics.Rmd</code></a></small>
      <div class="hidden name"><code>mosaics.Rmd</code></div>

    </div>

    
    
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<p>You can generate a brickr mosaic object from an image using <code><a href="../reference/image_to_mosaic.html">brickr::image_to_mosaic()</a></code>. Pass this object to <code><a href="../reference/build_mosaic.html">build_mosaic()</a></code> to construct a visualization of the mosaic.</p>
<p><img src="http://ryantimpe.com/files/mf_unicorn.PNG" width="250"></p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="no">demo_img</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span>(<span class="st">"http://ryantimpe.com/files/mf_unicorn.PNG"</span>, <span class="no">demo_img</span>, <span class="kw">mode</span><span class="kw">=</span><span class="st">"wb"</span>)

<span class="no">mosaic</span> <span class="kw">&lt;-</span> <span class="kw pkg">png</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html">readPNG</a></span>(<span class="no">demo_img</span>)  <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/image_to_mosaic.html">image_to_mosaic</a></span>()

<span class="no">mosaic</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/build_mosaic.html">build_mosaic</a></span>()</pre></body></html></div>
<p><img src="mosaics_files/figure-html/g1-1.png" width="700"></p>
<p>The default is to create a mosaic with 48 knobs (brick studs) on each side. Change this using the <code>img_size</code> input. A single value will create a square mosaic, while an array of two values represent the width and length.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="kw pkg">png</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html">readPNG</a></span>(<span class="no">demo_img</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/image_to_mosaic.html">image_to_mosaic</a></span>(<span class="kw">img_size</span> <span class="kw">=</span> <span class="fl">32</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build_mosaic.html">build_mosaic</a></span>()</pre></body></html></div>
<p><img src="mosaics_files/figure-html/g2-1.png" width="700"></p>
</div>
<div id="colors" class="section level2">
<h2 class="hasAnchor">
<a href="#colors" class="anchor"></a>Colors</h2>
<p>A key feature in <code><a href="../reference/image_to_mosaic.html">image_to_mosaic()</a></code> is the conversion of the original image into colors produced by LEGO. The default is to map each individual pixel to any of the 41 solid brick colors currently produced by LEGO using the <a href="https://en.wikipedia.org/wiki/Color_difference#CIE94">CIE94</a> algorithm. These defaults can be changed.</p>
<div id="color-palettes" class="section level3">
<h3 class="hasAnchor">
<a href="#color-palettes" class="anchor"></a>Color palettes</h3>
<p>There are currently 2 main ways to control the color palettes to build mosaics in brickr.</p>
<ul>
<li>The <code>color_palette</code> input takes a list of pre-defined palettes to create the mosaic.</li>
<li>The <code>color_table</code> input can take a data frame of specific colors. Usually a subset of the included <code>lego_colors</code> table.</li>
</ul>
<div id="default-color-palettes" class="section level4">
<h4 class="hasAnchor">
<a href="#default-color-palettes" class="anchor"></a>Default color palettes</h4>
<p>Each of the 41 colors belongs to one of three categories. These categories are mutually exclusive and can be used together.</p>
<ul>
<li>‘universal’ colors are the most common. This list includes white/black/grays/brown and the classic yellow, red, blue, and green colors. All brick sizes should be readily available in these colors.</li>
<li>‘generic’ colors are commonly used in LEGO products, though it might be more difficult to find every brick in these colors.</li>
<li>‘special’ colors are typically reserved for certain products and it’s likely that bricks might not be actively produced in these colors.</li>
</ul>
<p>Use the <code>color_palette</code> input in the <code><a href="../reference/image_to_mosaic.html">image_to_mosaic()</a></code> function to limit the bricks used to any combination of these three categories.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">p1</span> <span class="kw">&lt;-</span> <span class="kw pkg">png</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html">readPNG</a></span>(<span class="no">demo_img</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/image_to_mosaic.html">image_to_mosaic</a></span>(<span class="fl">32</span>, <span class="kw">color_palette</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'universal'</span>, <span class="st">'generic'</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build_mosaic.html">build_mosaic</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"universal &amp; generic"</span>)

<span class="no">p2</span> <span class="kw">&lt;-</span> <span class="kw pkg">png</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html">readPNG</a></span>(<span class="no">demo_img</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/image_to_mosaic.html">image_to_mosaic</a></span>(<span class="fl">32</span>, <span class="kw">color_palette</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'universal'</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build_mosaic.html">build_mosaic</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"universal"</span>)

<span class="kw pkg">gridExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span>(<span class="no">p1</span>, <span class="no">p2</span>, <span class="kw">layout_matrix</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">2</span>), <span class="kw">ncol</span><span class="kw">=</span><span class="fl">2</span>))</pre></body></html></div>
<p><img src="mosaics_files/figure-html/c_palettes-1.png" width="576"></p>
</div>
<div id="grayscale" class="section level4">
<h4 class="hasAnchor">
<a href="#grayscale" class="anchor"></a>Grayscale</h4>
<p>For grayscale or black and white mosaics, use <code>color_palette = 'bw'</code>. This creates the mosaic by measuring the brightness of each pixel in the image and mapping it one of the four shades of gray. Use the contrast input to adjust the relative brightness of the pixels.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="kw pkg">png</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html">readPNG</a></span>(<span class="no">demo_img</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/image_to_mosaic.html">image_to_mosaic</a></span>(<span class="fl">32</span>, <span class="kw">color_palette</span> <span class="kw">=</span> <span class="st">'bw'</span>, <span class="kw">contrast</span> <span class="kw">=</span> <span class="fl">1.1</span>)<span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build_mosaic.html">build_mosaic</a></span>()</pre></body></html></div>
<p><img src="mosaics_files/figure-html/c_bw-1.png" width="700"></p>
</div>
<div id="custom-color-palettes" class="section level4">
<h4 class="hasAnchor">
<a href="#custom-color-palettes" class="anchor"></a>Custom color palettes</h4>
<p>With the <code>color_table</code> input, it is possible to restrict the colors in the mosaic to a custom palette.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="co">#Remove blue and azure colors from lego_colors</span>
<span class="no">lego_colors_wo_blue</span> <span class="kw">&lt;-</span> <span class="no">lego_colors</span> <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(!<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"blue|azur"</span>, <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span>(<span class="no">Color</span>)))

<span class="kw pkg">png</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html">readPNG</a></span>(<span class="no">demo_img</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/image_to_mosaic.html">image_to_mosaic</a></span>(<span class="fl">32</span>, <span class="kw">color_table</span> <span class="kw">=</span> <span class="no">lego_colors_wo_blue</span>)<span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build_mosaic.html">build_mosaic</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"Mosaic without blue or azur"</span>)</pre></body></html></div>
<p><img src="mosaics_files/figure-html/c_custom-1.png" width="700"></p>
</div>
</div>
<div id="color-matching" class="section level3">
<h3 class="hasAnchor">
<a href="#color-matching" class="anchor"></a>Color matching</h3>
<p>brickr uses the <a href="https://CRAN.R-project.org/package=farver"><code>farver</code></a> package to match image colors to the subset of LEGO colors. Technical details of the different algorithms can be found on <a href="https://en.wikipedia.org/wiki/Color_difference">Wikipedia</a>.</p>
<p>The default algorithm is ‘cie94’, though the other farver options are available using the <code>method</code> input.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"cie94"</span>, <span class="st">"cie2000"</span>, <span class="st">"euclidean"</span>, <span class="st">"cmc"</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">purrr</span><span class="kw ns">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span>(~<span class="kw pkg">png</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html">readPNG</a></span>(<span class="no">demo_img</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/image_to_mosaic.html">image_to_mosaic</a></span>(<span class="fl">24</span>, <span class="kw">method</span> <span class="kw">=</span><span class="no">.x</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build_mosaic.html">build_mosaic</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="no">.x</span> )) <span class="kw">-&gt;</span> <span class="no">mosaics_by_method</span>

<span class="kw pkg">gridExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span>(<span class="kw">grobs</span> <span class="kw">=</span> <span class="no">mosaics_by_method</span>, <span class="kw">layout_matrix</span> <span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">2</span>),<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">3</span>,<span class="fl">4</span>)))</pre></body></html></div>
<p><img src="mosaics_files/figure-html/c_methods-1.png" width="480"></p>
</div>
<div id="dithering" class="section level3">
<h3 class="hasAnchor">
<a href="#dithering" class="anchor"></a>Dithering</h3>
<p>When rendering a mosaic from a photographic with many shades of similar colors, using <a href="https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering">dithering</a> by setting <code>dithering = TRUE</code> will help to add texture to the mosaic and avoid large areas of the same color. This works particularly well for large mosaics, but is purely a stylist preference.</p>
</div>
<div id="other-color-options" class="section level3">
<h3 class="hasAnchor">
<a href="#other-color-options" class="anchor"></a>Other color options</h3>
<p>The input <code>brightness</code> can be used to scale up or down the RGB values of the image before color matching. The default is 1.</p>
</div>
</div>
<div id="d-mosaics" class="section level2">
<h2 class="hasAnchor">
<a href="#d-mosaics" class="anchor"></a>3D Mosaics</h2>
<p>Passing the mosaic object to <code><a href="../reference/bricks_from_mosaic.html">bricks_from_mosaic()</a></code> will render a 3D object, stacking layers of bricks on each other to create an elevated mosaic. By default, the lightest color bricks will be on top, but this can be changed using the <code>highest_el = 'dark'</code> option.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="kw pkg">png</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html">readPNG</a></span>(<span class="no">demo_img</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/image_to_mosaic.html">image_to_mosaic</a></span>(<span class="fl">32</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/bricks_from_mosaic.html">bricks_from_mosaic</a></span>(<span class="kw">highest_el</span> <span class="kw">=</span> <span class="st">"dark"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build_bricks.html">build_bricks</a></span>(<span class="kw">outline_bricks</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">rgl_lit</span> <span class="kw">=</span> <span class="fl">FALSE</span>)

<span class="co">#From dput(round(rgl::par3d("userMatrix"),1)) after manual rotation</span>
<span class="no">custom_rotation</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html">structure</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">0.3</span>, -<span class="fl">0.3</span>, <span class="fl">0</span>, -<span class="fl">0.3</span>, <span class="fl">0.9</span>, -<span class="fl">0.3</span>,
                               <span class="fl">0</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.9</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>), <span class="kw">.Dim</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">4L</span>, <span class="fl">4L</span>))

<span class="kw pkg">rgl</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgl/man/par3d.html">par3d</a></span>(<span class="kw">userMatrix</span> <span class="kw">=</span> <span class="kw pkg">rgl</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgl/man/matrices.html">rotate3d</a></span>(<span class="no">custom_rotation</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="no">pi</span>/<span class="fl">4</span> ,<span class="fl">1</span>))</pre></body></html></div>
<p><img src="mosaics_files/figure-html/c_threed-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ryan Timpe.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
